{% extends "layout.html" %}
{% block content %}
<h1>{{ title }}</h1>
<p>Channel: {{ channel_id }}</p>
<p>Video ID: <a href="https://www.youtube.com/watch?v={{ video_id }}" target="_blank">{{ video_id }}<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"/></svg></a></p> 
<p>Method: {{ method }}</p>
<p>Uploaded on: {{ upload_date }}</p>

<hr />

{% if summary_html %}
<h2>Summary
  <svg onclick="copyToClipboard('summary-html')" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"/></svg>
</h2>

<div id="summary-html" style="display: none;">
  {{ summary_html|safe }}
</div>
<div>
  {{ summary_html|safe }}
</div>
{% else %}
{% if method != 'transcript' %}
  <p><em>No summary found.</em></p>
{% endif %}
{% endif %}

<hr />

<h2>Original Transcript</h2>

<h4>Transcript (With Timestamps)

    <svg onclick="copyToClipboard('transcript-with-ts')" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"/></svg>


</h4>
<details>
  <!--  Print only the first line of {{ transcript_with_ts }}-->
  <summary> {{ transcript_with_ts.split('\n')[0] }}</summary>
  <pre style="white-space: pre-wrap;" id="transcript-with-ts">{{ transcript_with_ts }}</pre>
</details>


<br>
<br>
<h4>Transcript (No Timestamps)

  <svg onclick="copyToClipboard('transcript-no-ts')" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"/></svg>


</h4>
<details style="margin-top:1em;">
  <summary> {{ transcript_no_ts.split('\n')[0] }}</summary>
  <pre style="white-space: pre-wrap;" id="transcript-no-ts">{{ transcript_no_ts }}</pre>
</details>
<script>
  /**
   * Copies the content of an element with the given ID to the clipboard.
   * @param {string} elementId - The ID of the element whose content is to be copied.
   */
  function copyToClipboard(elementId) {
    const element = document.getElementById(elementId);
    if (!element) {
      alert('Element not found.');
      return;
    }

    const content = element.innerText || element.textContent;

    navigator.clipboard.writeText(content).then(
      function () {
        //alert('Content copied to clipboard!');
        console.log('Content copied to clipboard:', content);
      },
      function (err) {
        alert('Failed to copy content: ', err);
        console.error('Failed to copy content:', err);
      }
    );
  }
</script>
{% endblock %}